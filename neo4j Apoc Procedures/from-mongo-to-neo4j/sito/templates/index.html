<!doctype html>
<html>
    <head>
        <title>HOME PAGE</title>
        <script src="https://rawgit.com/neo4j-contrib/neovis.js/master/dist/neovis.js"></script>

        <script type="text/javascript">
            var viz;
            function draw() {
                var config = {
                    container_id: "viz",
                    server_url: "bolt://172.18.1.2:7687",
                    server_user: "neo4j",
                    server_password: "mongo",
                    labels: {
                    	"Person": {
	                        "caption": "nome",
                            "font": {
                                "size":15,
                                "color":"#000000"
                            },
                    	},
                    	"Libro": {
	                        "caption": "nome_libro"
                    	},	
                    relationships: {
                        "letto_da": {
                            "caption": false,
                            "thickness":"rating",
                            }
                        },
                    },

                    arrows:true,


                	initial_cypher: "MATCH (n)-[r:letto_da]->(m) RETURN *"
                };

                viz = new NeoVis.default(config);
                viz.render();                
            }

        </script>
        <style type="text/css">
            .label, .input {
                display: inline-block;
                vertical-align: middle;
            }

            html, body {
                font: 16pt arial;
            }
    
            #viz {
                width: 900px;
                height: 400px;
                border: 1px solid lightgray;
                margin: auto;
            }
        </style>
    </head>


    <body onload="draw()">
		<div align="center">
			<h1 style="margin-bottom: 0" >BENVENUTO</h1>
			<h2 style="margin-top: 0;font-weight: normal;margin-bottom: 0;">Transform MongoDB collections automagically into Graphs</h2>
            <div>
                <p>
                    Quando si inserisce che un utente X ha letto il libro Y si aggiorna il documento associato al libro Y nel database NoSQL MongoDB.<br>
                    Dopo l'inserimento Ã¨ lanciata una APOC - <i>Awesome Procedures On Cypher</i> - che sincronizza il contenuto nel grafo di Neo4j.
                </p>
                </div>

			<form method="POST" action="/inserisci">
				  	<div>
				  		<label for="nome">nome</label>
				  		<input id="nome" type="text" name="nome" value="{{ nome }}">
				  	</div>
				  	<div>
				  		<label for="nome_libro">nome libro</label>
				  		<input id="nome_libro" type="text" name="nome_libro" value="{{ nome_libro }}">
				  	</div>
                    <div>
                        <label for="autore_libro">autore libro</label>
                        <input id="autore_libro" type="text" name="autore_libro" value="{{ autore_libro }}">
                    </div>
                    <div>
                        <label for="rating">rating</label>
                        <input type="number" id="rating" name="rating" min="1" max="5" value="{{ rating }}">
                    </div>
				  	<input id="my_submit" type="submit" value="inserisci">
			</form>




	        <div id="viz"></div>
        </div>
    </body>    


</html>